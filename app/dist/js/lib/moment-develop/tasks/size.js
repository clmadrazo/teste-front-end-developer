function getVersion(e,t){var n="",r=https.request({host:"raw.github.com",port:443,path:"/timrwood/moment/"+e},function(e){e.setEncoding("utf8"),e.on("data",function(e){n+=e}),e.on("end",function(e){zlib.gzip(n,function(e,r){t(n.length,r.length)})})});r.on("error",function(e){console.log("problem with request: "+e.message)}),r.end()}function printDiffs(e,t,n,r){var i=n-e,s=r-t;console.log("Filesize difference from current branch to "+stable),console.log(stable+"   "+e+" / "+t),console.log("curr    "+n+" / "+r),console.log("diff    "+(i>0?"+":"")+i),console.log("gzip    "+(s>0?"+":"")+s)}var https=require("https"),zlib=require("zlib"),path=require("path"),fs=require("fs"),stable="1.7.1",done;module.exports=function(e){e.registerTask("size","Check the codebase filesize against the latest stable version.",function(){done=this.async(),fs.readFile(path.normalize(__dirname+"/../min/moment.min.js"),"utf8",function(e,t){if(e)throw e;zlib.gzip(t,function(e,n){getVersion(stable+"/min/moment.min.js",function(e,r){printDiffs(e,r,t.length,n.length),done()})})})})};